<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Changes to String in java (from 1.7.0_06) | </title>
  <link rel = 'canonical' href = 'https://www.carldelfin.com/posts/2020-06-06-changes-in-java-string/'>
  <meta name="description" content="My name is Slim Shady.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Changes to String in java (from 1.7.0_06)" />
<meta property="og:description" content="Before 1.7.0_06, String has 4 non static field:
 char[] value int[] offset int count int hash  Subing.substring create a String by sharing the original String&rsquo;s internal char[] value and setting offset. This saves memory and makes String.substring run in a constant time($O(1)$). Meanwhile, this feature may cause memory leak1.
http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** The offset is the first index of the storage that is used." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.carldelfin.com/posts/2020-06-06-changes-in-java-string/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-06T09:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-06T09:00:00+00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Changes to String in java (from 1.7.0_06)"/>
<meta name="twitter:description" content="Before 1.7.0_06, String has 4 non static field:
 char[] value int[] offset int count int hash  Subing.substring create a String by sharing the original String&rsquo;s internal char[] value and setting offset. This saves memory and makes String.substring run in a constant time($O(1)$). Meanwhile, this feature may cause memory leak1.
http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** The offset is the first index of the storage that is used."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://www.carldelfin.com/css/styles.6783045861a88c3c512c75c0af54fa1a0fc8758602f5e55b603ed3a95f89bc6ae822eacb3b7655abf3b9964cf4a0c4f4ddf50a95d1f20502b9602d1b19534834.css" integrity="sha512-Z4MEWGGojDxRLHXAr1T6Gg/IdYYC9eVbYD7TqV&#43;JvGroIurLO3ZVq/O5lkz0oMT03fUKldHyBQK5YC0bGVNINA=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://www.carldelfin.com/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://www.carldelfin.com/posts/2020-05-01-algorithms-graphs/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://www.carldelfin.com/posts/2020-12-01-r-rmarkdown/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&text=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&is_video=false&description=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&body=Check out this article: https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&name=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&description=Before%201.7.0_06%2c%20String%20has%204%20non%20static%20field%3a%0a%20char%5b%5d%20value%20int%5b%5d%20offset%20int%20count%20int%20hash%20%20Subing.substring%20create%20a%20String%20by%20sharing%20the%20original%20String%26rsquo%3bs%20internal%20char%5b%5d%20value%20and%20setting%20offset.%20This%20saves%20memory%20and%20makes%20String.substring%20run%20in%20a%20constant%20time%28%24O%281%29%24%29.%20Meanwhile%2c%20this%20feature%20may%20cause%20memory%20leak1.%0ahttp%3a%2f%2fhg.openjdk.java.net%2fjdk6%2fjdk6%2fjdk%2ffile%2f8deef18bb749%2fsrc%2fshare%2fclasses%2fjava%2flang%2fString.java%0apublic%20final%20class%20String%20implements%20java.io.Serializable%2c%20Comparable%26lt%3bString%26gt%3b%2c%20CharSequence%20%7b%20%2f%2a%2a%20The%20value%20is%20used%20for%20character%20storage.%20%2a%2f%20private%20final%20char%20value%5b%5d%3b%20%2f%2a%2a%20The%20offset%20is%20the%20first%20index%20of%20the%20storage%20that%20is%20used." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&t=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents"></nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Changes to String in java (from 1.7.0_06)
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-06-06 09:00:00 &#43;0000 UTC" itemprop="datePublished">2020-06-06</time>
          
        </div>
        
        
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>Before 1.7.0_06, <code>String</code> has 4 non static field:</p>
<ul>
<li>char[] value</li>
<li>int[] offset</li>
<li>int count</li>
<li>int hash</li>
</ul>
<p><code>Subing.substring</code> create a String by sharing the original String&rsquo;s internal <code>char[] value</code> and setting offset. This saves memory and makes <code>String.substring</code> run in a constant time($O(1)$).
Meanwhile, this feature may cause <strong>memory leak</strong><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p><a href="http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java">http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">String</span>
    <span style="color:#007020;font-weight:bold">implements</span> java<span style="color:#666">.</span><span style="color:#4070a0">io</span><span style="color:#666">.</span><span style="color:#4070a0">Serializable</span><span style="color:#666">,</span> Comparable<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;,</span> CharSequence
<span style="color:#666">{</span>
    <span style="color:#60a0b0;font-style:italic">/** The value is used for character storage. */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#902000">char</span> value<span style="color:#666">[];</span>

    <span style="color:#60a0b0;font-style:italic">/** The offset is the first index of the storage that is used. */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#902000">int</span> offset<span style="color:#666">;</span>

    <span style="color:#60a0b0;font-style:italic">/** The count is the number of characters in the String. */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#902000">int</span> count<span style="color:#666">;</span>

    <span style="color:#60a0b0;font-style:italic">/** Cache the hash code for the string */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#902000">int</span> hash<span style="color:#666">;</span> <span style="color:#60a0b0;font-style:italic">// Default to 0
</span><span style="color:#60a0b0;font-style:italic"></span>
    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span>
    <span style="color:#60a0b0;font-style:italic">// Package private constructor which shares value array for speed.
</span><span style="color:#60a0b0;font-style:italic"></span>    String<span style="color:#666">(</span><span style="color:#902000">int</span> offset<span style="color:#666">,</span> <span style="color:#902000">int</span> count<span style="color:#666">,</span> <span style="color:#902000">char</span> value<span style="color:#666">[])</span> <span style="color:#666">{</span>
        <span style="color:#007020;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#4070a0">value</span> <span style="color:#666">=</span> value<span style="color:#666">;</span>
        <span style="color:#007020;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#4070a0">offset</span> <span style="color:#666">=</span> offset<span style="color:#666">;</span>
        <span style="color:#007020;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#4070a0">count</span> <span style="color:#666">=</span> count<span style="color:#666">;</span>
    <span style="color:#666">}</span>

    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span>
    <span style="color:#60a0b0;font-style:italic">/**
</span><span style="color:#60a0b0;font-style:italic">     * Returns a new string that is a substring of this string. The
</span><span style="color:#60a0b0;font-style:italic">     * substring begins at the specified &lt;code&gt;beginIndex&lt;/code&gt; and
</span><span style="color:#60a0b0;font-style:italic">     * extends to the character at index &lt;code&gt;endIndex - 1&lt;/code&gt;.
</span><span style="color:#60a0b0;font-style:italic">     * Thus the length of the substring is &lt;code&gt;endIndex-beginIndex&lt;/code&gt;.
</span><span style="color:#60a0b0;font-style:italic">     * &lt;p&gt;
</span><span style="color:#60a0b0;font-style:italic">     * Examples:
</span><span style="color:#60a0b0;font-style:italic">     * &lt;blockquote&gt;&lt;pre&gt;
</span><span style="color:#60a0b0;font-style:italic">     * &#34;hamburger&#34;.substring(4, 8) returns &#34;urge&#34;
</span><span style="color:#60a0b0;font-style:italic">     * &#34;smiles&#34;.substring(1, 5) returns &#34;mile&#34;
</span><span style="color:#60a0b0;font-style:italic">     * &lt;/pre&gt;&lt;/blockquote&gt;
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @param      beginIndex   the beginning index, inclusive.
</span><span style="color:#60a0b0;font-style:italic">     * @param      endIndex     the ending index, exclusive.
</span><span style="color:#60a0b0;font-style:italic">     * @return     the specified substring.
</span><span style="color:#60a0b0;font-style:italic">     * @exception  IndexOutOfBoundsException  if the
</span><span style="color:#60a0b0;font-style:italic">     *             &lt;code&gt;beginIndex&lt;/code&gt; is negative, or
</span><span style="color:#60a0b0;font-style:italic">     *             &lt;code&gt;endIndex&lt;/code&gt; is larger than the length of
</span><span style="color:#60a0b0;font-style:italic">     *             this &lt;code&gt;String&lt;/code&gt; object, or
</span><span style="color:#60a0b0;font-style:italic">     *             &lt;code&gt;beginIndex&lt;/code&gt; is larger than
</span><span style="color:#60a0b0;font-style:italic">     *             &lt;code&gt;endIndex&lt;/code&gt;.
</span><span style="color:#60a0b0;font-style:italic">     */</span>
    <span style="color:#007020;font-weight:bold">public</span> String <span style="color:#06287e">substring</span><span style="color:#666">(</span><span style="color:#902000">int</span> beginIndex<span style="color:#666">,</span> <span style="color:#902000">int</span> endIndex<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>beginIndex <span style="color:#666">&lt;</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>beginIndex<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>endIndex <span style="color:#666">&gt;</span> count<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>endIndex<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>beginIndex <span style="color:#666">&gt;</span> endIndex<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>endIndex <span style="color:#666">-</span> beginIndex<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">return</span> <span style="color:#666">((</span>beginIndex <span style="color:#666">==</span> 0<span style="color:#666">)</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">(</span>endIndex <span style="color:#666">==</span> count<span style="color:#666">))</span> <span style="color:#666">?</span> <span style="color:#007020;font-weight:bold">this</span> <span style="color:#666">:</span>
            <span style="color:#007020;font-weight:bold">new</span> String<span style="color:#666">(</span>offset <span style="color:#666">+</span> beginIndex<span style="color:#666">,</span> endIndex <span style="color:#666">-</span> beginIndex<span style="color:#666">,</span> value<span style="color:#666">);</span>
    <span style="color:#666">}</span>

    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#666">}</span>
</code></pre></div><p>Since Java 1.7.0_06, <code>offset</code> and <code>count</code> fields were removed. <code>String.substring</code> makes new copies of <code>value</code>, which means we can forget about the memory leak but the runtime becomes $O(N)$ at the same time.</p>
<p><a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/String.java">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/String.java</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java">
<span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">String</span>
    <span style="color:#007020;font-weight:bold">implements</span> java<span style="color:#666">.</span><span style="color:#4070a0">io</span><span style="color:#666">.</span><span style="color:#4070a0">Serializable</span><span style="color:#666">,</span> Comparable<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;,</span> CharSequence <span style="color:#666">{</span>
    <span style="color:#60a0b0;font-style:italic">/** The value is used for character storage. */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#007020;font-weight:bold">final</span> <span style="color:#902000">char</span> value<span style="color:#666">[];</span>

    <span style="color:#60a0b0;font-style:italic">/** Cache the hash code for the string */</span>
    <span style="color:#007020;font-weight:bold">private</span> <span style="color:#902000">int</span> hash<span style="color:#666">;</span> <span style="color:#60a0b0;font-style:italic">// Default to 0
</span><span style="color:#60a0b0;font-style:italic"></span>
    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span>
  <span style="color:#60a0b0;font-style:italic">/**
</span><span style="color:#60a0b0;font-style:italic">     * Allocates a new {@code String} that contains characters from a subarray
</span><span style="color:#60a0b0;font-style:italic">     * of the character array argument. The {@code offset} argument is the
</span><span style="color:#60a0b0;font-style:italic">     * index of the first character of the subarray and the {@code count}
</span><span style="color:#60a0b0;font-style:italic">     * argument specifies the length of the subarray. The contents of the
</span><span style="color:#60a0b0;font-style:italic">     * subarray are copied; subsequent modification of the character array does
</span><span style="color:#60a0b0;font-style:italic">     * not affect the newly created string.
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @param  value
</span><span style="color:#60a0b0;font-style:italic">     *         Array that is the source of characters
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @param  offset
</span><span style="color:#60a0b0;font-style:italic">     *         The initial offset
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @param  count
</span><span style="color:#60a0b0;font-style:italic">     *         The length
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @throws  IndexOutOfBoundsException
</span><span style="color:#60a0b0;font-style:italic">     *          If the {@code offset} and {@code count} arguments index
</span><span style="color:#60a0b0;font-style:italic">     *          characters outside the bounds of the {@code value} array
</span><span style="color:#60a0b0;font-style:italic">     */</span>
    <span style="color:#007020;font-weight:bold">public</span> <span style="color:#06287e">String</span><span style="color:#666">(</span><span style="color:#902000">char</span> value<span style="color:#666">[],</span> <span style="color:#902000">int</span> offset<span style="color:#666">,</span> <span style="color:#902000">int</span> count<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>offset <span style="color:#666">&lt;</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>offset<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>count <span style="color:#666">&lt;</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>count<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#60a0b0;font-style:italic">// Note: offset or count might be near -1&gt;&gt;&gt;1.
</span><span style="color:#60a0b0;font-style:italic"></span>        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>offset <span style="color:#666">&gt;</span> value<span style="color:#666">.</span><span style="color:#4070a0">length</span> <span style="color:#666">-</span> count<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>offset <span style="color:#666">+</span> count<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">this</span><span style="color:#666">.</span><span style="color:#4070a0">value</span> <span style="color:#666">=</span> Arrays<span style="color:#666">.</span><span style="color:#4070a0">copyOfRange</span><span style="color:#666">(</span>value<span style="color:#666">,</span> offset<span style="color:#666">,</span> offset<span style="color:#666">+</span>count<span style="color:#666">);</span>
    <span style="color:#666">}</span>

    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span>
<span style="color:#60a0b0;font-style:italic">/**
</span><span style="color:#60a0b0;font-style:italic">     * Returns a string that is a substring of this string. The
</span><span style="color:#60a0b0;font-style:italic">     * substring begins at the specified {@code beginIndex} and
</span><span style="color:#60a0b0;font-style:italic">     * extends to the character at index {@code endIndex - 1}.
</span><span style="color:#60a0b0;font-style:italic">     * Thus the length of the substring is {@code endIndex-beginIndex}.
</span><span style="color:#60a0b0;font-style:italic">     * &lt;p&gt;
</span><span style="color:#60a0b0;font-style:italic">     * Examples:
</span><span style="color:#60a0b0;font-style:italic">     * &lt;blockquote&gt;&lt;pre&gt;
</span><span style="color:#60a0b0;font-style:italic">     * &#34;hamburger&#34;.substring(4, 8) returns &#34;urge&#34;
</span><span style="color:#60a0b0;font-style:italic">     * &#34;smiles&#34;.substring(1, 5) returns &#34;mile&#34;
</span><span style="color:#60a0b0;font-style:italic">     * &lt;/pre&gt;&lt;/blockquote&gt;
</span><span style="color:#60a0b0;font-style:italic">     *
</span><span style="color:#60a0b0;font-style:italic">     * @param      beginIndex   the beginning index, inclusive.
</span><span style="color:#60a0b0;font-style:italic">     * @param      endIndex     the ending index, exclusive.
</span><span style="color:#60a0b0;font-style:italic">     * @return     the specified substring.
</span><span style="color:#60a0b0;font-style:italic">     * @exception  IndexOutOfBoundsException  if the
</span><span style="color:#60a0b0;font-style:italic">     *             {@code beginIndex} is negative, or
</span><span style="color:#60a0b0;font-style:italic">     *             {@code endIndex} is larger than the length of
</span><span style="color:#60a0b0;font-style:italic">     *             this {@code String} object, or
</span><span style="color:#60a0b0;font-style:italic">     *             {@code beginIndex} is larger than
</span><span style="color:#60a0b0;font-style:italic">     *             {@code endIndex}.
</span><span style="color:#60a0b0;font-style:italic">     */</span>
    <span style="color:#007020;font-weight:bold">public</span> String <span style="color:#06287e">substring</span><span style="color:#666">(</span><span style="color:#902000">int</span> beginIndex<span style="color:#666">,</span> <span style="color:#902000">int</span> endIndex<span style="color:#666">)</span> <span style="color:#666">{</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>beginIndex <span style="color:#666">&lt;</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>beginIndex<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>endIndex <span style="color:#666">&gt;</span> value<span style="color:#666">.</span><span style="color:#4070a0">length</span><span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>endIndex<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#902000">int</span> subLen <span style="color:#666">=</span> endIndex <span style="color:#666">-</span> beginIndex<span style="color:#666">;</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>subLen <span style="color:#666">&lt;</span> 0<span style="color:#666">)</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">throw</span> <span style="color:#007020;font-weight:bold">new</span> StringIndexOutOfBoundsException<span style="color:#666">(</span>subLen<span style="color:#666">);</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">return</span> <span style="color:#666">((</span>beginIndex <span style="color:#666">==</span> 0<span style="color:#666">)</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">(</span>endIndex <span style="color:#666">==</span> value<span style="color:#666">.</span><span style="color:#4070a0">length</span><span style="color:#666">))</span> <span style="color:#666">?</span> <span style="color:#007020;font-weight:bold">this</span>
                <span style="color:#666">:</span> <span style="color:#007020;font-weight:bold">new</span> String<span style="color:#666">(</span>value<span style="color:#666">,</span> beginIndex<span style="color:#666">,</span> subLen<span style="color:#666">);</span>
    <span style="color:#666">}</span>

    <span style="color:#60a0b0;font-style:italic">// ...
</span><span style="color:#60a0b0;font-style:italic"></span>
<span style="color:#666">}</span>
</code></pre></div><p>The auther&rsquo;s comment<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>:
<!-- raw HTML omitted -->Card<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="http://java-performance.info/changes-to-string-java-1-7-0_06/">http://java-performance.info/changes-to-string-java-1-7-0_06/</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://www.reddit.com/r/programming/comments/1qw73v/til_oracle_changed_the_internal_string/cdhb77f/">https://www.reddit.com/r/programming/comments/1qw73v/til_oracle_changed_the_internal_string/cdhb77f/</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents"></nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&text=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&is_video=false&description=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&body=Check out this article: https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&name=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&description=Before%201.7.0_06%2c%20String%20has%204%20non%20static%20field%3a%0a%20char%5b%5d%20value%20int%5b%5d%20offset%20int%20count%20int%20hash%20%20Subing.substring%20create%20a%20String%20by%20sharing%20the%20original%20String%26rsquo%3bs%20internal%20char%5b%5d%20value%20and%20setting%20offset.%20This%20saves%20memory%20and%20makes%20String.substring%20run%20in%20a%20constant%20time%28%24O%281%29%24%29.%20Meanwhile%2c%20this%20feature%20may%20cause%20memory%20leak1.%0ahttp%3a%2f%2fhg.openjdk.java.net%2fjdk6%2fjdk6%2fjdk%2ffile%2f8deef18bb749%2fsrc%2fshare%2fclasses%2fjava%2flang%2fString.java%0apublic%20final%20class%20String%20implements%20java.io.Serializable%2c%20Comparable%26lt%3bString%26gt%3b%2c%20CharSequence%20%7b%20%2f%2a%2a%20The%20value%20is%20used%20for%20character%20storage.%20%2a%2f%20private%20final%20char%20value%5b%5d%3b%20%2f%2a%2a%20The%20offset%20is%20the%20first%20index%20of%20the%20storage%20that%20is%20used." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.carldelfin.com%2fposts%2f2020-06-06-changes-in-java-string%2f&t=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Carl Delfin 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
